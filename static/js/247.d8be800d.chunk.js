"use strict";(self.webpackChunkmidispatcher=self.webpackChunkmidispatcher||[]).push([[247],{80247:function(n,e,t){t.r(e),t.d(e,{KeyboardMachine:function(){return v},KeyboardNodeWidget:function(){return N}});var o,r,i,a,s,u,c,d,l,f=t(30168),p=t(15671),x=t(43144),b=t(60136),g=t(27277),h=t(7894),m=t(47313),w=t(45808),y=t(47616),k=t(22089),M=t(46417),v=(0,k.xc)((r=function(n){(0,b.Z)(t,n);var e=(0,g.Z)(t);function t(){var n;return(0,p.Z)(this,t),(n=e.call(this)).getNode().addMachineOutPort("Out",0),n}return(0,x.Z)(t,[{key:"getFactory",value:function(){return t.factory}},{key:"getState",value:function(){}}],[{key:"buildFactory",value:function(){return this.factory||(this.factory={createMachine:function(){return new t},createWidget:function(n,e){return(0,M.jsx)(N,{engine:n,size:50,node:e,machine:e.machine})},getType:function(){return k.Ax.Emitter},getName:function(){return"KeyboardMachine"},getTooltip:function(){return"Visual keyboard to send out MIDI notes with fixed attack"},getMachineCode:function(){return"keyboard"}}),this.factory}}]),t}(k.Vs),r.factory=void 0,o=r))||o,N=function(n){function e(e){return(0,M.jsx)(y.kL,{engine:n.engine,port:e},e.getID())}function t(e){var t=w.dU.buildNote(e,{rawAttack:150}),o=Uint8Array.from([w.NT.MIDI_CHANNEL_MESSAGES.noteon<<4,t.getOffsetNumber(w.u5.octaveOffset),t.rawAttack]);n.machine.emit({message:{rawData:o,isChannelMessage:!0,type:"noteon",channel:1},type:"noteon"},0)}function o(e){var t=w.dU.buildNote(e,{rawAttack:150}),o=Uint8Array.from([w.NT.MIDI_CHANNEL_MESSAGES.noteoff<<4,t.getOffsetNumber(w.u5.octaveOffset),t.rawAttack]);n.machine.emit({message:{rawData:o,isChannelMessage:!0,type:"noteoff",channel:1},type:"noteoff"},0)}return m.useEffect((function(){var n={q:"B2",s:"C3",e:"C#3",d:"D3",r:"D#3",f:"E3",g:"F3",y:"F#3",h:"G3",u:"G#3",j:"A3",i:"A#3",k:"B3",l:"C4"},e=function(e){e.repeat||void 0!=n[e.key]&&t(n[e.key])},r=function(e){void 0!=n[e.key]&&o(n[e.key])};return window.addEventListener("keydown",e),window.addEventListener("keyup",r),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",r)}}),[]),(0,M.jsxs)(d.Body,{"data-default-node-name":n.node.getOptions().name,selected:n.node.isSelected(),background:n.node.getOptions().color,children:[(0,M.jsx)(d.Title,{children:(0,M.jsx)(d.TitleName,{children:n.node.getOptions().name})}),(0,M.jsxs)(d.Ports,{children:[(0,M.jsx)(d.PortsContainer,{children:n.node.getInPorts().map(e)}),(0,M.jsx)(d.PortsContainer,{children:n.node.getOutPorts().map(e)})]}),(0,M.jsxs)("ul",{className:"set",children:[(0,M.jsx)("li",{className:"white e",onMouseDown:function(){return t("C3")},onMouseUp:function(){return o("C3")}}),(0,M.jsx)("li",{className:"black ds",onMouseDown:function(){return t("C#3")},onMouseUp:function(){return o("C#3")}}),(0,M.jsx)("li",{className:"white d",onMouseDown:function(){return t("D3")},onMouseUp:function(){return o("D3")}}),(0,M.jsx)("li",{className:"black cs",onMouseDown:function(){return t("D#3")},onMouseUp:function(){return o("D#3")}}),(0,M.jsx)("li",{className:"white c",onMouseDown:function(){return t("E3")},onMouseUp:function(){return o("E3")}}),(0,M.jsx)("li",{className:"white b",onMouseDown:function(){return t("F3")},onMouseUp:function(){return o("F3")}}),(0,M.jsx)("li",{className:"black as",onMouseDown:function(){return t("F#3")},onMouseUp:function(){return o("F#3")}}),(0,M.jsx)("li",{className:"white a",onMouseDown:function(){return t("G3")},onMouseUp:function(){return o("G3")}}),(0,M.jsx)("li",{className:"black gs",onMouseDown:function(){return t("G#3")},onMouseUp:function(){return o("G#3")}}),(0,M.jsx)("li",{className:"white g",onMouseDown:function(){return t("A3")},onMouseUp:function(){return o("A3")}}),(0,M.jsx)("li",{className:"black fs",onMouseDown:function(){return t("A#3")},onMouseUp:function(){return o("A#3")}}),(0,M.jsx)("li",{className:"white f",onMouseDown:function(){return t("B3")},onMouseUp:function(){return o("B3")}})]})]})};(l=d||(d={})).Title=h.default.div(i||(i=(0,f.Z)(["\n        background: rgba(0, 0, 0, 0.3);\n        display: flex;\n        white-space: nowrap;\n        justify-items: center;\n    "]))),l.TitleName=h.default.div(a||(a=(0,f.Z)(["\n        flex-grow: 1;\n        padding: 5px 5px;\n    "]))),l.Ports=h.default.div(s||(s=(0,f.Z)(["\n        display: flex;\n        background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n    "]))),l.PortsContainer=h.default.div(u||(u=(0,f.Z)(["\n        flex-grow: 1;\n        display: flex;\n        justify-content: flex-end;\n        &:first-of-type {\n\n            margin-right: 10px;\n        }\n        &:only-child {\n\n            margin-right: 0px;\n        }\n    "]))),l.Body=h.default.div(c||(c=(0,f.Z)(["\n        background-color: ",";\n        border-radius: 5px;\n        font-family: sans-serif;\n        color: white;\n        border: solid 2px black;\n        overflow: visible;\n        font-size: 11px;\n        border: solid 2px ",";\n\n    * {\n\n        box-sizing:border-box\n    }\n\n    ul {\n\n        position:relative;\n        border-radius:1em;\n    }\n\n    li {\n\n        margin:0;\n        padding:0;\n        list-style:none;\n        position:relative;\n        float:left\n    }\n\n    ul .white {\n\n        height:8em;\n        width:3em;\n        z-index:1;\n        border-left:1px solid #bbb;\n        border-bottom:1px solid #bbb;\n        border-radius:0 0 5px 5px;\n        box-shadow:-1px 0 0 rgba(255,255,255,0.8) inset,0 0 5px #ccc inset,0 0 3px rgba(0,0,0,0.2);\n        background:linear-gradient(to bottom,#eee 0%,#fff 100%)\n    }\n\n    ul .white:active {\n\n        border-top:1px solid #777;\n        border-left:1px solid #999;\n        border-bottom:1px solid #999;\n        box-shadow:2px 0 3px rgba(0,0,0,0.1) inset,-5px 5px 20px rgba(0,0,0,0.2) inset,0 0 3px rgba(0,0,0,0.2);\n        background:linear-gradient(to bottom,#fff 0%,#e9e9e9 100%)\n    }\n\n    .black {\n\n        height:5em;\n        width:1.5em;\n        margin:0 0 0 -1em;\n        z-index:2;\n        border:1px solid #000;\n        border-radius:0 0 3px 3px;\n        box-shadow:-1px -1px 2px rgba(255,255,255,0.2) inset,0 -5px 2px 3px rgba(0,0,0,0.6) inset,0 2px 4px rgba(0,0,0,0.5);\n        background:linear-gradient(45deg,#222 0%,#555 100%)\n    }\n\n    .black:active {\n\n        box-shadow:-1px -1px 2px rgba(255,255,255,0.2) inset,0 -2px 2px 3px rgba(0,0,0,0.6) inset,0 1px 2px rgba(0,0,0,0.5);\n        background:linear-gradient(to right,#444 0%,#222 100%)\n    }\n\n    .a,.g,.f,.d,.c {\n\n        margin:0 0 0 -1em\n    }\n\n    ul li:first-of-type {\n\n        border-radius:5px 0 5px 5px\n    }\n\n    ul li:last-child {\n\n        border-radius:0 5px 5px 5px\n    }\n    "])),(function(n){return n.background}),(function(n){return n.selected?"rgb(0,192,255)":"black"}))}}]);