"use strict";(self.webpackChunkmidispatcher=self.webpackChunkmidispatcher||[]).push([[683],{88683:function(e,n,t){t.r(n),t.d(n,{ToneJsSampleMachine:function(){return K}});var a,i,r,s,o,l,c,u,d,p,h=t(30168),m=t(70885),f=t(15671),g=t(43144),v=t(60136),b=t(27277),x=t(4942),y=t(47313),k=t(28689),w=t(22089),j=t(7894),D=t(94650),Z=t(47616),C=t(46417);function S(e){switch(e){case"Drum":return{urls:{B1:"kick.mp3",C2:"kick.mp3",D2:"snare.mp3","F#2":"hihat.mp3","G#2":"hihat.mp3","A#2":"hihat.mp3"},release:10,baseUrl:"https://tonejs.github.io/audio/drum-samples/CR78/"};case"Kalimba":return{urls:{G3:"Kalimba_1.mp3"},release:10,baseUrl:"https://tonejs.github.io/audio/berklee/"};case"Guitar":return{urls:{A2:"guitar_Astring.mp3"},release:10,baseUrl:"https://tonejs.github.io/audio/berklee/"};default:return function(e){var n=function(e){switch(e){case"bassoon":case"cello":case"flute":case"french-horn":case"guitar-acoustic":case"guitar-electric":case"harmonium":case"organ":case"piano":case"saxophone":case"trombone":case"trumpet":case"violin":return"C4";case"guitar-nylon":case"harp":return"A4";case"bass-electric":case"contrabass":return"E3";case"tuba":case"clarinet":return"D3";case"xylophone":return"C5";default:return"A3"}}(e);return{urls:(0,x.Z)({},n,n+".mp3"),release:5,baseUrl:A+e+"/"}}(e)}}var A="https://nbrosowsky.github.io/tonejs-instruments/samples/";var P=["Drum","Kalimba","Guitar","bass-electric","bassoon","cello","clarinet","contrabass","flute","french-horn","guitar-acoustic","guitar-electric","guitar-nylon","harmonium","harp","organ","piano","saxophone","trombone","trumpet","tuba","violin","xylophone"];var T,I,K=(a=(0,w.gj)("Drum"),(0,w.xc)(i=a((r=function(e){(0,v.Z)(t,e);var n=(0,b.Z)(t);function t(e){var a;return(0,f.Z)(this,t),(a=n.call(this)).sampler=void 0,a.sample=void 0,a.destination=void 0,a.sample=e,a.sampler=new k.Z4(S(e)),a.destination=new k.qk,a.sampler.connect(a.destination),a.destination.toDestination(),a.getNode().addMachineInPort("In",1),a}return(0,g.Z)(t,[{key:"setState",value:function(e){var n=S(e),t=new k.Z4(n);this.sampler.dispose(),this.sampler=t.connect(this.destination),this.sample=e}},{key:"getState",value:function(){return this.sample}},{key:"dispose",value:function(){this.sampler.releaseAll()}},{key:"getFactory",value:function(){return t.factory}},{key:"receive",value:function(e,n,t){if(this.sampler.loaded)switch(k.Do.lookAhead=0,e.type){case"stop":this.sampler.releaseAll(),t.setSending(!0);break;case"noteon":t.setSending(!0),0===e.message.rawData[2]?this.sampler.triggerRelease((0,D.lK)(e.message.rawData[1])):this.sampler.triggerAttack((0,D.lK)(e.message.rawData[1]),k.Do.currentTime);break;case"noteoff":t.setSending(!0),this.sampler.triggerRelease((0,D.lK)(e.message.rawData[1]))}}},{key:"getInChannelCount",value:function(){return 1}}],[{key:"buildFactory",value:function(e){if(void 0==e&&this.factory)return this.factory;if(void 0!=e&&void 0!=this.factories[e])return this.factories[e];var n={createMachine:function(n){var a;return new t(null!==(a=null!==n&&void 0!==n?n:e)&&void 0!==a?a:"Guitar")},createWidget:function(e,n){return(0,C.jsx)(M,{engine:e,size:50,node:n,machine:n.machine})},getName:function(){return"ToneJsSampleMachine"+(void 0==e?"":" ("+e+")")},getType:function(){return w.Ax.Output},getTooltip:function(){return"Reads MIDI notes and emits sound"},getMachineCode:function(){return"sample"}};return void 0==e?this.factory=n:this.factories[e]=n,n}}]),t}(w.Vs),r.factory=void 0,r.factories={},i=r))||i)||i),M=function(e){function n(n){return(0,C.jsx)(Z.kL,{engine:e.engine,port:n},n.getID())}var t=(0,w.mV)(e.machine.destination),a=(0,m.Z)(t,2),i=a[0],r=a[1],s=y.useState(e.node.machine.getState()),o=(0,m.Z)(s,2),l=o[0],c=o[1];return(0,C.jsxs)(T.Body,{"data-default-node-name":e.node.getOptions().name,selected:e.node.isSelected(),background:e.node.getOptions().color,children:[(0,C.jsx)(T.Title,{children:(0,C.jsx)(T.TitleName,{children:e.node.getOptions().name})}),(0,C.jsxs)(T.Ports,{children:[(0,C.jsx)(T.PortsContainer,{children:e.node.getInPorts().map(n)}),(0,C.jsx)(T.PortsContainer,{children:e.node.getOutPorts().map(n)})]}),(0,C.jsx)("div",{ref:i}),(0,C.jsx)("div",{ref:r}),(0,C.jsxs)(T.Dropdown,{children:[(0,C.jsx)("span",{children:"Preset: "}),(0,C.jsx)("select",{name:"sampleSelection",value:l,onChange:function(n){!function(n){var t=n;c(t),e.machine.setState(t)}(n.target.value)},children:P.map((function(e){return(0,C.jsx)("option",{value:e,children:e},e)}))})]})]})};(I=T||(T={})).SettingsBar=j.default.div(s||(s=(0,h.Z)(['\n        padding: 3px;\n        position: relative;\n        vertical-align: middle;\n        width: 100%;\n        display: flex;\n        justifyContent: "center";\n        flex-direction: column;\n    ']))),I.Dropdown=j.default.div(o||(o=(0,h.Z)(["\n        vertical-align: middle;\n        width: 100%;\n        span {\n\n            vertical-align: middle;\n        }\n        input {\n\n            vertical-align: middle;\n        }\n    "]))),I.Title=j.default.div(l||(l=(0,h.Z)(["\n        background: rgba(0, 0, 0, 0.3);\n        display: flex;\n        white-space: nowrap;\n        justify-items: center;\n    "]))),I.TitleName=j.default.div(c||(c=(0,h.Z)(["\n        flex-grow: 1;\n        padding: 5px 5px;\n    "]))),I.Ports=j.default.div(u||(u=(0,h.Z)(["\n        display: flex;\n        background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n    "]))),I.PortsContainer=j.default.div(d||(d=(0,h.Z)(["\n        flex-grow: 1;\n        display: flex;\n        flex-direction: column;\n        &:first-of-type {\n\n            margin-right: 10px;\n        }\n        &:only-child {\n\n            margin-right: 0px;\n        }\n    "]))),I.Body=j.default.div(p||(p=(0,h.Z)(["\n        background-color: ",";\n        border-radius: 5px;\n        font-family: sans-serif;\n        color: white;\n        border: solid 2px black;\n        overflow: visible;\n        font-size: 11px;\n        border: solid 2px ",";\n\n    * {\n\n        box-sizing:border-box\n    }"])),(function(e){return e.background}),(function(e){return e.selected?"rgb(0,192,255)":"black"}))}}]);