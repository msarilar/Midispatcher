"use strict";(self.webpackChunkmidispatcher=self.webpackChunkmidispatcher||[]).push([[90],{29090:function(e,n,t){t.r(n),t.d(n,{ThruMachine:function(){return R}});var r,i,a,o,l,c,s,d,u,g,f,p,v,h=t(30168),m=t(70885),y=t(1413),x=t(15671),b=t(43144),Z=t(60136),S=t(27277),w=t(7894),j=t(47313),C=t(57633),k=t(97180),z=t(18104),I=t(52538),T=t(47616),M=t(22089),O=t(46417),R=(0,M.xc)((i=function(e){(0,Z.Z)(t,e);var n=(0,S.Z)(t);function t(e){var r;return(0,x.Z)(this,t),(r=n.call(this)).config=void 0,r.config=null!==e&&void 0!==e?e:{detune:0,filterType:"none",filters:[],currentCategory:void 0,currentSubcategory:void 0},r.getNode().addMachineOutPort("Out",0),r.getNode().addMachineInPort("In",0),r}return(0,b.Z)(t,[{key:"getFactory",value:function(){return t.factory}},{key:"getState",value:function(){return this.config}},{key:"setState",value:function(e){this.config=e}},{key:"isFiltered",value:function(e){if("none"===this.config.filterType)return!1;for(var n=0;n<this.config.filters.length;n++){var t=this.config.filters[n];if("denies"===this.config.filterType){if(t.Category===e.message.rawData[0]&&void 0==t.Subcategory||t.Subcategory===e.message.rawData[1])return!0}else if(t.Category===e.message.rawData[0]&&void 0==t.Subcategory||t.Subcategory===e.message.rawData[1])return!1}return"allows"===this.config.filterType}},{key:"receive",value:function(e,n,t){this.isFiltered(e)||(t.setSending(!0),0==this.config.detune||"noteon"!==e.message.type&&"noteoff"!==e.message.type||((e=(0,y.Z)((0,y.Z)({},e),{},{message:(0,y.Z)((0,y.Z)({},e.message),{},{rawData:new Uint8Array(e.message.rawData)})})).message.rawData[1]+=this.config.detune),this.emit(e,n))}}],[{key:"buildFactory",value:function(){return this.factory||(this.factory={createMachine:function(e){return new t(e)},createWidget:function(e,n){return(0,O.jsx)(D,{engine:e,size:50,node:n,machine:n.machine})},getName:function(){return"ThruMachine"},getType:function(){return M.Ax.Processor},getTooltip:function(){return"Reads all MIDI messages, can apply a detune to any incoming NOTEON message as well as filtering specific MIDI messages"},getMachineCode:function(){return"thru"}}),this.factory}}]),t}(M.Vs),i.factory=void 0,r=i))||r,D=function(e){var n=j.useState(e.machine.getState()),t=(0,m.Z)(n,2),r=t[0],i=t[1];function a(n){return(0,O.jsx)(T.kL,{engine:e.engine,port:n},n.getID())}function o(n){e.machine.setState(n),i(n)}function l(n){e.node.setLocked(!n)}function c(e,n,t){var i="create"===t?(0,O.jsx)(z.Z,{"aria-label":"add filter",color:"primary",disabled:void 0==r.currentCategory&&void 0==r.currentSubcategory,onClick:function(){var e={Category:r.currentCategory,Subcategory:r.currentSubcategory};o((0,y.Z)((0,y.Z)({},r),{},{filters:r.filters.concat(e),currentCategory:void 0,currentSubcategory:void 0}))},children:(0,O.jsx)(C.Z,{})}):(0,O.jsx)(z.Z,{"aria-label":"delete filter",color:"primary",onClick:function(){r.filters.splice(t,1),o((0,y.Z)((0,y.Z)({},r),{},{filters:r.filters}))},children:(0,O.jsx)(k.Z,{})}),a="create"!==t;return(0,O.jsxs)(p.SettingsBarVertical,{children:[(0,O.jsx)(I.Z,{value:void 0==e?"":e,type:"number",size:"small",onChange:function(e){return"create"===t?o((0,y.Z)((0,y.Z)({},r),{},{currentCategory:parseInt(e.target.value)<1?void 0:parseInt(e.target.value)})):void 0},InputProps:{style:{fontSize:"12px",color:"white",height:"20px"},readOnly:a}}),(0,O.jsx)(I.Z,{value:void 0==n?"":n,type:"number",size:"small",onChange:function(e){return"create"===t?o((0,y.Z)((0,y.Z)({},r),{},{currentSubcategory:parseInt(e.target.value)<1?void 0:parseInt(e.target.value)})):void 0},InputProps:{style:{fontSize:"12px",color:"white",height:"20px"},readOnly:a}}),i]},t)}var s=r.filters.map((function(e,n){return c(e.Category,e.Subcategory,n)}));return(0,O.jsxs)(p.Body,{"data-default-node-name":e.node.getOptions().name,selected:e.node.isSelected(),background:e.node.getOptions().color,children:[(0,O.jsx)(p.Title,{children:(0,O.jsx)(p.TitleName,{children:e.node.getOptions().name})}),(0,O.jsxs)(p.Ports,{children:[(0,O.jsx)(p.PortsContainer,{children:e.node.getInPorts().map(a)}),(0,O.jsx)(p.PortsContainer,{children:e.node.getOutPorts().map(a)})]}),(0,O.jsxs)(p.SettingsBar,{children:[(0,O.jsxs)(p.Slider,{children:[(0,O.jsxs)("span",{children:["Detune (",r.detune,")"]}),(0,O.jsx)("input",{onMouseOver:function(e){return l(!1)},onMouseOut:function(e){return l(!0)},type:"range",min:"-12.0",max:"12.0",step:"1",value:r.detune,onChange:function(e){o((0,y.Z)((0,y.Z)({},r),{},{detune:Number(e.target.value)}))},list:"detunes",name:"detune"}),(0,O.jsxs)("datalist",{id:"detunes",children:[(0,O.jsx)("option",{value:"-12.0",label:"-1 octave"}),(0,O.jsx)("option",{value:"0",label:"Normal"}),(0,O.jsx)("option",{value:"12.0",label:"+1 octave"})]})]}),"MIDI Filtering:",s,c(r.currentCategory,r.currentSubcategory,"create"),(0,O.jsxs)(p.Dropdown,{children:[(0,O.jsx)("span",{children:"filtering type: "}),(0,O.jsxs)("select",{name:"filterType",value:r.filterType,onChange:function(e){o((0,y.Z)((0,y.Z)({},r),{},{filterType:e.target.value}))},children:[(0,O.jsx)("option",{value:"none",children:"None"}),(0,O.jsx)("option",{value:"allows",children:"Allows"}),(0,O.jsx)("option",{value:"denies",children:"Denies"})]})]})]})]})};(v=p||(p={})).Dropdown=w.default.div(a||(a=(0,h.Z)(["\n        vertical-align: middle;\n        span {\n\n            vertical-align: middle;\n        }\n        input {\n\n            vertical-align: middle;\n        }\n    "]))),v.SettingsBarVertical=w.default.div(o||(o=(0,h.Z)(['\n        position: relative;\n        vertical-align: middle;\n        width: 100%;\n        height: 24px;\nwidth: 200px;\n        display: flex;\n        justifyContent: "down";\n        flex-direction: row;\n    ']))),v.Slider=w.default.div(l||(l=(0,h.Z)(["\n        vertical-align: middle;\n        input {\n\n            vertical-align: middle;\n        }\n        span {\n\n            vertical-align: middle;\n        }\n    "]))),v.SettingsBar=w.default.div(c||(c=(0,h.Z)(["\n        padding: 3px;\n        position: relative;\n        vertical-align: middle;\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n    "]))),v.Title=w.default.div(s||(s=(0,h.Z)(["\n        background: rgba(0, 0, 0, 0.3);\n        display: flex;\n        white-space: nowrap;\n        justify-items: center;\n    "]))),v.TitleName=w.default.div(d||(d=(0,h.Z)(["\n        flex-grow: 1;\n        padding: 5px 5px;\n    "]))),v.Ports=w.default.div(u||(u=(0,h.Z)(["\n        display: flex;\n        background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n    "]))),v.PortsContainer=w.default.div(g||(g=(0,h.Z)(["\n        flex-grow: 1;\n        display: flex;\n        flex-direction: column;\n        &:first-of-type {\n\n            margin-right: 10px;\n        }\n        &:only-child {\n\n            margin-right: 0px;\n        }\n    "]))),v.Body=w.default.div(f||(f=(0,h.Z)(["\n        background-color: ",";\n        border-radius: 5px;\n        font-family: sans-serif;\n        color: white;\n        border: solid 2px black;\n        overflow: visible;\n        font-size: 11px;\n        border: solid 2px ",";\n\n    * {\n\n        box-sizing:border-box\n    }"])),(function(e){return e.background}),(function(e){return e.selected?"rgb(0,192,255)":"black"}))},57633:function(e,n,t){var r=t(25700),i=t(46417);n.Z=(0,r.Z)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddBox")},97180:function(e,n,t){var r=t(25700),i=t(46417);n.Z=(0,r.Z)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},18104:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(4942),i=t(63366),a=t(87462),o=t(47313),l=t(83061),c=t(21921),s=t(17551),d=t(42379),u=t(83729),g=t(86366),f=t(28170),p=t(77430),v=t(32298);function h(e){return(0,v.Z)("MuiIconButton",e)}var m=(0,p.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),y=t(46417),x=["edge","children","className","color","disabled","disableFocusRipple","size"],b=(0,d.ZP)(g.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,"default"!==t.color&&n["color".concat((0,f.Z)(t.color))],t.edge&&n["edge".concat((0,f.Z)(t.edge))],n["size".concat((0,f.Z)(t.size))]]}})((function(e){var n=e.theme,t=e.ownerState;return(0,a.Z)({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.activeChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,s.Fq)(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),(function(e){var n=e.theme,t=e.ownerState;return(0,a.Z)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,a.Z)({color:(n.vars||n).palette[t.color].main},!t.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[t.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,s.Fq)(n.palette[t.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===t.size&&{padding:5,fontSize:n.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:n.typography.pxToRem(28)},(0,r.Z)({},"&.".concat(m.disabled),{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}))})),Z=o.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiIconButton"}),r=t.edge,o=void 0!==r&&r,s=t.children,d=t.className,g=t.color,p=void 0===g?"default":g,v=t.disabled,m=void 0!==v&&v,Z=t.disableFocusRipple,S=void 0!==Z&&Z,w=t.size,j=void 0===w?"medium":w,C=(0,i.Z)(t,x),k=(0,a.Z)({},t,{edge:o,color:p,disabled:m,disableFocusRipple:S,size:j}),z=function(e){var n=e.classes,t=e.disabled,r=e.color,i=e.edge,a=e.size,o={root:["root",t&&"disabled","default"!==r&&"color".concat((0,f.Z)(r)),i&&"edge".concat((0,f.Z)(i)),"size".concat((0,f.Z)(a))]};return(0,c.Z)(o,h,n)}(k);return(0,y.jsx)(b,(0,a.Z)({className:(0,l.Z)(z.root,d),centerRipple:!0,focusRipple:!S,disabled:m,ref:n,ownerState:k},C,{children:s}))}))}}]);